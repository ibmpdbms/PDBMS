{% extends "layout.html" %}

{% block title %}
    Manage Patient Accounts
{% endblock %}

{% block main %}
    <h2 class="mb-4">ðŸ‘¤ Manage Patient Accounts</h2>

    {% if patients %}
        <table class="table table-striped table-bordered w-75 mx-auto">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Phone Number</th>
                    <th>UUID</th>
                    <th>Patient Code</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for patient in patients %}
                <tr>
                    <td>{{ patient.id }}</td>
                    <td>{{ patient.username }}</td>
                    <td>{{ patient.email or "â€”" }}</td>
                    <td>{{ patient.phone_number or "â€”" }}</td>
                    <td>{{ patient.uuid or "â€”" }}</td>
                    <td>
                        {% if patient.patient_code %}
                            {{ patient.patient_code }}
                        {% else %}
                            <a href="/link_patient/{{ patient.id }}" 
                               class="btn btn-sm btn-warning">Link Patient Code</a>
                        {% endif %}
                    </td>
                    <td>
                        <a href="/confirm_delete_user/{{ patient.uuid }}" 
                            class="btn btn-danger btn-sm">Delete Account</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="alert alert-info">No patient accounts found.</div>
    {% endif %}
{% endblock %}
