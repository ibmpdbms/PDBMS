{% extends "layout.html" %}

{% block title %}
    Confirm User Account Deletion
{% endblock %}

{% block main %}
    <h1 class="mb-4 text-danger">‚ö†Ô∏è Confirm User Account Deletion</h1>

    <div class="card w-75 mx-auto shadow-sm border-danger">
        <div class="card-body text-start">
            <h5 class="card-title text-danger">{{ user.username.upper() }}</h5>
            <p><strong>Role:</strong> {{ user.role.upper() }}</p>
            <p><strong>Email:</strong> {{ linked_user.email if linked_user else "No linked patient account found" }}</p>
            <p><strong>Phone:</strong> {{ linked_user.phone_number if linked_user else "‚Äî" }}</p>
            <p><strong>UUID:</strong> <span class="text-danger">{{ user.uuid }}</span></p>
        </div>
    </div>

    <div class="alert alert-warning w-75 mx-auto mt-4">
        <p>‚ö†Ô∏è This action <strong>cannot be undone</strong>. To confirm, type the UUID below:</p>
        <form action="/delete_user/{{ user.id }}" method="post">
            <input type="hidden" name="next" value="{{ referrer }}">
            <div class="mb-3">
                <input type="text" name="confirm_uuid" class="form-control" 
                    placeholder="Enter UUID to confirm" required autofocus>
            </div>
            <button type="submit" class="btn btn-danger">üóë Permanently Delete User</button>
            <a href="{{ referrer }}" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
{% endblock %}
