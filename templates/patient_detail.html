{% extends "layout.html" %}

{% block title %}
    Patient Details
{% endblock %}

{% block main %}
<h1 class="mb-4 text-primary text-center">🧾 Patient Details</h1>

<div class="card w-75 mx-auto shadow-sm">
    <div class="card-header bg-primary text-white text-center fs-4">
        {{ patient.patient_name }}
    </div>
    <div class="card-body text-start">
        <h6 class="text-muted mb-3">📅 Record Date: {{ patient.date }}</h6>
        <p><strong>Blood Group:</strong> {{ patient.blood_group }}</p>
        <p><strong>Weight:</strong> {{ patient.weight }} kg</p>
        <p><strong>Height:</strong> {{ patient.height }} cm</p>
        <p><strong>Allergies:</strong> {{ patient.allergies }}</p>
        <p><strong>Past Treatments:</strong> {{ patient.past_treatments }}</p>
        <p><strong>Past Diseases:</strong> {{ patient.past_diseases }}</p>
        <p><strong>Doctor:</strong> {{ patient.doctor_name }}</p>
        <p><strong>Room Number:</strong> {{ patient.room_number }}</p>
        <p><strong>Past Doctor:</strong> {{ patient.past_doctor_name }}</p>
        <p><strong>Insurance Company:</strong> {{ patient.insurance_company }}</p>
        <p><strong>Doctor Notes:</strong> {{ patient.doctor_notes }}</p>
    </div>
</div>

<div class="text-center mt-4">
    <a href="{% if role == 'patient' %}/patient_dashboard{% else %}/search_patient?q={{ patient.patient_name }}{% endif %}" 
       class="btn btn-secondary me-2">
        ⬅️ Back to Search
    </a>
    
    <a href="/download_health_card/{{ patient.patient_code }}" class="btn btn-primary">
        📥 Download Health Card
    </a>
</div>

{% if session["role"] in ["staff", "admin"] %}
<div class="text-center mt-4">
    <a href="/confirm_delete/{{ patient.patient_code }}" class="btn btn-danger">
        🗑 Delete Patient
    </a>
</div>
{% endif %}
{% endblock %}
