{% extends "layout.html" %}

{% block title %}
    Change Password
{% endblock %}

{% block main %}
<form action="/change_password" method="post" class="mx-auto" style="max-width: 400px;">
    <div class="mb-3 input-group">
        <input autocomplete="off" autofocus class="form-control" 
               id="curr_pw" name="curr_pw" placeholder="Current Password" type="password" required>
        <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('curr_pw', this)">👁️</button>
    </div>
    <div class="mb-3 input-group">
        <input class="form-control" id="new_pw" name="new-password" placeholder="New Password" type="password" required>
        <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('new_pw', this)">👁️</button>
    </div>
    <div class="mb-3 input-group">
        <input class="form-control" id="confirm_pw" name="confirmation-new-pw" placeholder="Confirm New Password" type="password" required>
        <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('confirm_pw', this)">👁️</button>
    </div>
    <button class="btn btn-primary w-100" type="submit">Change Password</button>

    <div class="mt-4 text-center">
        <h1 style="font-size: 16pt; max-width: 600px; margin: 0 auto; word-wrap: break-word; line-height: 1.5;">
            ⚠️ After changing your password, you will be logged out. Log in again to continue with the services.
        </h1>
    </div>
</form>

<script>
function togglePassword(fieldId, btn) {
    const field = document.getElementById(fieldId);
    if (field.type === "password") {
        field.type = "text";
        btn.textContent = "🙈";
    } else {
        field.type = "password";
        btn.textContent = "👁️";
    }
}
</script>
{% endblock %}
